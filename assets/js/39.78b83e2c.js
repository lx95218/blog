(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{449:function(e,t,a){"use strict";a.r(t);var s=a(2),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"官方-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方-hook"}},[e._v("#")]),e._v(" 官方 hook")]),e._v(" "),t("h2",{attrs:{id:"usecallback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usecallback"}},[e._v("#")]),e._v(" useCallback")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const cachedFn = useCallback(fn,dep)\n//适用:函数组件嵌套函数组件，且父组件向子组件传递function\n//原理:函数组件每一次render，都会创建新的function,传递给子组件，造成子组件rerender,使用useCallback包裹想要传递的function\n")])])]),t("h2",{attrs:{id:"usecontext"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usecontext"}},[e._v("#")]),e._v(" useContext")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('//root:\nconst SomeContext = React.creatContext()\n<SomeContext.provider value="dark">\n\t<App/>\n</SomeContext.provider>\n//child:\nconst value = useContext(SomeContext)\n//适用:批量的修改所有的组件树的属性，例如主题，多语言\n')])])]),t("h2",{attrs:{id:"usedebugvalue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usedebugvalue"}},[e._v("#")]),e._v(" useDebugValue")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("useDebugValue(value,format?)\n//适用:应用于customerHook,显示在react-devTools\n")])])]),t("h2",{attrs:{id:"usedeferredvalue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usedeferredvalue"}},[e._v("#")]),e._v(" useDeferredValue")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const deferredValue = useDefferedValue(value)\n//作用：降低依赖value的渲染优先级\n")])])]),t("h2",{attrs:{id:"useeffect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#useeffect"}},[e._v("#")]),e._v(" useEffect")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("useEffect(effect,dep?)\n// case 1\nuseEffect(()=>{\n\t//effect will only apply in component mounted\n   return ()=>{\n    //effect will only apply in component destroyed\n    // all function and state is the same as mounted\n}\n},[])\n//case 2\nuseEffect(()=>{\n    //effect will apply in component mounted and dep change\n},[dep])\n//case 3\nuseEffect(()=>{\n    //effect will apply in component render\n})\nuseEffect()\n")])])]),t("h2",{attrs:{id:"useid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#useid"}},[e._v("#")]),e._v(" useId")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const id = useId()\n//用途:可以生成传递给无障碍属性的唯一 ID\n")])])]),t("h2",{attrs:{id:"useimperativehandle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#useimperativehandle"}},[e._v("#")]),e._v(" useImperativeHandle")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("useImperativeHandle(ref,createHandle,dep?)\n// 向父组件暴露指定方法\nconst MyInput = forwardRef(funciton MyInput(props,ref){\n\tuseImperativeHandle(ref,()=>{\n\t\treturn{\n\t\t\tfunction\n\t\t}\n\t},[])\n})\n")])])]),t("h2",{attrs:{id:"uselayouteffect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uselayouteffect"}},[e._v("#")]),e._v(" useLayoutEffect")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("useLayoutEffect(setup,dep?)\n// useLayoutEffect is a version of useEffect that fires before the browser repaints the screen.\n")])])]),t("h2",{attrs:{id:"usememo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usememo"}},[e._v("#")]),e._v(" useMemo")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const cachedValue = useMemo(calculateValue,dep)\n//用途:cache the computed,avoid re-renders\n")])])]),t("h2",{attrs:{id:"usereducer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usereducer"}},[e._v("#")]),e._v(" useReducer")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function reducer(state,action){\n}\nconst [state,dispatch] = useReducer(reducer,initialArg,init?)\n")])])]),t("h2",{attrs:{id:"useref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#useref"}},[e._v("#")]),e._v(" useRef")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const ref = useRef(initialValue)\n")])])]),t("h2",{attrs:{id:"usestate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[e._v("#")]),e._v(" useState")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const [state,useState] = useState(initValue)\n")])])]),t("h2",{attrs:{id:"usesyncexternalstore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usesyncexternalstore"}},[e._v("#")]),e._v(" useSyncExternalStore")]),e._v(" "),t("div",{staticClass:"language-tsx extra-class"},[t("pre",{pre:!0,attrs:{class:"language-tsx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" snapshot "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("useSyncExternalStore")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("subscribe"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("getSnapshot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("getServerSnapshot"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("subscribe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("callback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\twindow"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("addEventListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"resize"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("callback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("removeEventListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"resize"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("callback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("getSnapshot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),t("h2",{attrs:{id:"usetransition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usetransition"}},[e._v("#")]),e._v(" useTransition")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const [isPending,startTransition] = useTransition()\n//isPending:是否存在待处理的转换\n//startTransition:允许你将状态更新标记为转换状态\n")])])]),t("h1",{attrs:{id:"自定义-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义-hook"}},[e._v("#")]),e._v(" 自定义 hook")]),e._v(" "),t("h2",{attrs:{id:"useresizeobserve"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#useresizeobserve"}},[e._v("#")]),e._v(" useResizeObserve")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('import * as React from "react"\ntype TargetRef = React.MutableRefObject<HTMLElement | null>\nexport function useResizeObserver(){\n    const [ size,resizeSize] = React.useState({width:0,height:0})\n    const target:TargetRef = React.useRef<HTMLElement|null>(null)\n    const callBack =(entries:ResizeObserverEntry[])=>{\n        const {width,height} = entries[0].contentRect\n        const nextSize = {...size,width,height}\n        resizeSize(nextSize)\n    }\n    const observer = new ResizeObserver(callBack)\n    React.useEffect(()=>{\n        if(target.current!==null){\n            observer.observe(target.current)\n        }\n        return ()=>{\n            observer.disconnect()\n        }\n    },[])\n    return [target,size]\n}\n')])])]),t("h2",{attrs:{id:"useprevious"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#useprevious"}},[e._v("#")]),e._v(" usePrevious")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function usePrevious<T>(value: T) {\n   const ref = React.useRef<T>()\n   React.useEffect(() => {\n      ref.current = value\n   }, [value])\n   return ref.current\n}\nexport default usePrevious\n")])])]),t("h2",{attrs:{id:"uselast"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uselast"}},[e._v("#")]),e._v(" useLast")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function useLast<T>(value: T) {\n   const ref = useRef(value)\n   ref.current = value\n   return ref\n}\nexport default useLast\n")])])]),t("h2",{attrs:{id:"useupdateeffect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#useupdateeffect"}},[e._v("#")]),e._v(" useUpdateEffect")]),e._v(" "),t("div",{staticClass:"language-react extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const useFirstMountState = () => {\n   const isFirst = useRef(true)\n   if (isFirst.current) {\n      isFirst.current = false\n      return true\n   }\n   return isFirst.current\n}\nconst useUpdateEffect: typeof useEffect = (effect, deps) => {\n   const isFirstMount = useFirstMountState()\n   useEffect(() => {\n      if (!isFirstMount) {\n         return effect()\n      }\n   }, deps)\n}\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);